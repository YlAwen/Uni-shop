{"version":3,"sources":["uni-app:///src/main.js","webpack:///./src/subpkg/search/search.vue?affb","webpack:///./src/subpkg/search/search.vue?fcb6","webpack:///./src/subpkg/search/search.vue?edc8","webpack:///./src/subpkg/search/search.vue?b0a9","uni-app:///src/subpkg/search/search.vue","webpack:///./src/subpkg/search/search.vue?5601","webpack:///./src/subpkg/search/search.vue?3eda"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;;;AAAA;;AACA;;AACA;;;;AAFmBA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC;AAGnBC,UAAU,CAACC,eAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAmH;AACnH;AAC0D;AACL;AACc;;;AAGnE;AACmI;AACnI,gBAAgB,gJAAU;AAC1B,EAAE,4EAAM;AACR,EAAE,iFAAM;AACR,EAAE,0FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,qFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAmc,CAAgB,+dAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eCqDvd;AACA,gBADA;AAEA;AAAA;AACA,iBADA;AAEA,YAFA;AAGA,uBAHA;AAIA,qBAJA;AAKA;AALA;AAAA,GAFA;AASA,cATA;AAUA;AACA,UADA,kBACA,CADA,EACA;AAAA;;AACA;AACA;AACA;AACA;;AACA;AACA,OAJA,EAIA,GAJA;AAKA,KARA;AASA;AACA,iBAVA,2BAUA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACA,6BADA;AAAA;AAAA;AAAA;;AAEA;AAFA;;AAAA;AAAA;AAAA,uBAKA;AACA;AADA,kBALA;;AAAA;AAKA,mBALA;;AAAA,sBASA,4BATA;AAAA;AAAA;AAAA;;AAAA,iDASA,cATA;;AAAA;AAUA;;AACA;;AACA;AACA;AACA,oCADA;AAEA,kCAFA;AAGA;AAHA;AAKA;;AAlBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAmBA,KA7BA;AA8BA;AACA,cA/BA,sBA+BA,EA/BA,EA+BA;AACA;AACA;AADA;AAGA,KAnCA;AAoCA;AACA,qBArCA,+BAqCA;AACA;AACA;AACA;AACA,KAzCA;AA0CA;AACA,SA3CA,mBA2CA;AACA;AACA;AACA;AACA,sBADA;AAEA;AAFA;AAIA,KAlDA;AAmDA;AACA,iBApDA,yBAoDA,IApDA,EAoDA;AACA;AACA;AADA;AAGA;AAxDA,GAVA;AAoEA,WApEA;AAsEA;AACA,QAvEA,oBAuEA;AACA;AACA,GAzEA;AA0EA;AACA,SA3EA,qBA2EA,EA3EA;AA4EA;AACA,QA7EA,oBA6EA,EA7EA;AA8EA;AACA,QA/EA,oBA+EA,EA/EA;AAgFA;AACA,UAjFA,sBAiFA,EAjFA;AAkFA;AACA,mBAnFA,+BAmFA;AACA;AACA,GArFA;AAsFA;AACA,eAvFA,2BAuFA,EAvFA,CAwFA;;AACA;AACA;;AACA;;AA3FA,C;;;;;;;;;;;;;;ACrDA;AAAA;AAAA;AAAA;AAA80B,CAAgB,2zBAAG,EAAC,C;;;;;;;;;;;ACAl2B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"subpkg/search/search.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './subpkg/search/search.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./search.vue?vue&type=template&id=1480e53a&\"\nvar renderjs\nimport script from \"./search.vue?vue&type=script&lang=js&\"\nexport * from \"./search.vue?vue&type=script&lang=js&\"\nimport style0 from \"./search.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"subpkg/search/search.vue\"\nexport default component.exports","export * from \"-!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--15-0!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./search.vue?vue&type=template&id=1480e53a&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./search.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./search.vue?vue&type=script&lang=js&\"","<template>\r\n  <view>\r\n    <!-- 搜索框 -->\r\n    <view class=\"search-box\">\r\n      <van-search\r\n        @change=\"change\"\r\n        background=\"#c00000\"\r\n        placeholder=\"请输入搜索关键词\"\r\n        shape=\"round\"\r\n        focus\r\n      />\r\n    </view>\r\n    <!-- 搜索框 -->\r\n\r\n    <!-- 搜索建议列表 -->\r\n    <view class=\"sugg-list\" v-if=\"searchResults.length !== 0\">\r\n      <view\r\n        class=\"sugg-item\"\r\n        v-for=\"(item, index) in searchResults\"\r\n        :key=\"item.goods_id\"\r\n        @click=\"gotoDetail(item.goods_id)\"\r\n      >\r\n        <view class=\"goods-name\">{{ item.goods_name }}</view>\r\n        <van-icon name=\"arrow\" size=\"16\" />\r\n      </view>\r\n    </view>\r\n    <!-- 搜索建议列表 -->\r\n\r\n    <!-- 搜索历史 -->\r\n    <view class=\"histroy-box\" v-if=\"searchResults.length === 0\">\r\n      <!-- 标题 -->\r\n      <view class=\"histroy-title\">\r\n        <text>搜索历史</text>\r\n        <van-icon name=\"delete-o\" size=\"17\" @click=\"clean\" />\r\n      </view>\r\n      <!-- 列表 -->\r\n      <view class=\"histroy-list\">\r\n        <view\r\n          v-for=\"(item, index) in historyList\"\r\n          :key=\"index\"\r\n          @click=\"gotoGoodsList(item)\"\r\n        >\r\n          <van-tag size=\"large\" color=\"#efefef\" text-color=\"#000\">{{\r\n            item\r\n          }}</van-tag>\r\n        </view>\r\n      </view>\r\n    </view>\r\n    <!-- 搜索历史 -->\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  components: {},\r\n  data: () => ({\r\n    timer: null,\r\n    kw: \"\",\r\n    searchResults: [],\r\n    historyList: [],\r\n    value: \"\",\r\n  }),\r\n  computed: {},\r\n  methods: {\r\n    change(e) {\r\n      clearTimeout(this.timer);\r\n      this.timer = setTimeout(() => {\r\n        // console.log(e.detail);\r\n        this.kw = e.detail;\r\n        this.getSearchList();\r\n      }, 500);\r\n    },\r\n    // 获取搜索列表\r\n    async getSearchList() {\r\n      if (this.kw.trim().length === 0) {\r\n        this.searchResults = [];\r\n        return;\r\n      }\r\n      const res = await uni.$http.get(\"/api/public/v1/goods/qsearch\", {\r\n        query: this.kw,\r\n      });\r\n      // console.log(res);\r\n      if (res.data.meta.status !== 200) return uni.$showMsg();\r\n      this.searchResults = res.data.message;\r\n      this.saveSearchHistory();\r\n      if (res.data.message.length === 0) {\r\n        uni.showToast({\r\n          title: \"没有搜索结果！\",\r\n          duration: 1000,\r\n          icon: \"error\",\r\n        });\r\n      }\r\n    },\r\n    // 导航跳转\r\n    gotoDetail(id) {\r\n      uni.navigateTo({\r\n        url: `/subpkg/goods_detail/goods_detail?goods_id=${id}`,\r\n      });\r\n    },\r\n    // 保存搜索历史\r\n    saveSearchHistory() {\r\n      if (this.historyList.indexOf(this.kw) !== -1) return;\r\n      this.historyList.unshift(this.kw);\r\n      uni.setStorageSync(\"kw\", JSON.stringify(this.historyList));\r\n    },\r\n    // 清空搜索记录\r\n    clean() {\r\n      this.historyList = [];\r\n      uni.setStorageSync(\"kw\", \"[]\");\r\n      uni.showToast({\r\n        title: \"删除成功！\",\r\n        duration: 1000,\r\n      });\r\n    },\r\n    // 导航跳转\r\n    gotoGoodsList(item) {\r\n      uni.navigateTo({\r\n        url: \"/subpkg/goods_list/goods_list?query=\" + item,\r\n      });\r\n    },\r\n  },\r\n  watch: {},\r\n\r\n  // 页面周期函数--监听页面加载\r\n  onLoad() {\r\n    this.historyList = JSON.parse(uni.getStorageSync(\"kw\") || \"[]\");\r\n  },\r\n  // 页面周期函数--监听页面初次渲染完成\r\n  onReady() {},\r\n  // 页面周期函数--监听页面显示(not-nvue)\r\n  onShow() {},\r\n  // 页面周期函数--监听页面隐藏\r\n  onHide() {},\r\n  // 页面周期函数--监听页面卸载\r\n  onUnload() {},\r\n  // 页面处理函数--监听用户下拉动作\r\n  onPullDownRefresh() {\r\n    uni.stopPullDownRefresh();\r\n  },\r\n  // 页面处理函数--监听用户上拉触底\r\n  onReachBottom() {},\r\n  // 页面处理函数--监听页面滚动(not-nvue)\r\n  /* onPageScroll(event) {}, */\r\n  // 页面处理函数--用户点击右上角分享\r\n  /* onShareAppMessage(options) {}, */\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n.search-box {\r\n  position: sticky;\r\n  top: 0;\r\n  z-index: 999;\r\n}\r\n.sugg-list {\r\n  padding: 0 5px;\r\n\r\n  .sugg-item {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    font-size: 12px;\r\n    padding: 13px 0;\r\n    border-bottom: 1px solid #efefef;\r\n    .goods-name {\r\n      white-space: nowrap;\r\n      overflow: hidden;\r\n      text-overflow: ellipsis;\r\n    }\r\n  }\r\n}\r\n.histroy-box {\r\n  padding: 0 5px;\r\n  .histroy-title {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    height: 40px;\r\n    align-items: center;\r\n    font-size: 13px;\r\n    border-bottom: 1px solid #efefef;\r\n  }\r\n  .histroy-list {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    .van-tag {\r\n      margin: 5px 5px 0 0;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--11-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-3!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-4!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--11-oneOf-1-5!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./search.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--11-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-3!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-4!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--11-oneOf-1-5!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./search.vue?vue&type=style&index=0&lang=less&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1641746726361\n      var cssReload = require(\"E:/Project/uni-shop/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}